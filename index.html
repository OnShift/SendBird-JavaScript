<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='UTF-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget Sample</title>

    <style>
      body { margin: 0; background: #E9EBEE; }
    </style>

  </head>
  <body>
    <h2 id="currentUser"></h2>
    <button id="openWidget" onclick="open_widget()" style="fo">Press Me to Open the Widget</button>
    <br>
    <button id="closeWidget" onclick="close_widget()">Press Me to Close the Widget</button>
    <div id="sb_widget"></div>
  </body>

  <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyBQStdZp-0taWROjUGgP_wcn5Kpmle0Po8",
        authDomain: "android-push-spike.firebaseapp.com",
        databaseURL: "https://android-push-spike.firebaseio.com",
        projectId: "android-push-spike",
        storageBucket: "android-push-spike.appspot.com",
        messagingSenderId: "429643698611"
      };
      firebase.initializeApp(config);
    </script>
  <script src="build/widget.SendBird.js"></script>
  <script>
    var userId;

    function open_widget() {
        var channelBoard = document.getElementsByClassName('channel-board')[0];
        channelBoard.style = 'display: block';
        channelBoard.className = "channel-board sb-fade-in";

    }
    function close_widget() {
        var channelBoard = document.getElementsByClassName('channel-board')[0];
        channelBoard.style = '';
        channelBoard.className = "channel-board sb-fade-out";

    }
    if(document.cookie) {
      userId = document.cookie.split(';')[0].split('=')[1]
    } else {
      var limit = 100;
      var possibleNames = [];
      for(var i = 0; i <= limit; i++) {
        possibleNames.push('a_widget_user_' + i);
      }
      userId = possibleNames[Math.floor(Math.random() * Math.floor(limit))];
      document.cookie = `sendbirdUserId=${userId}`;
    }

    document.getElementById("currentUser").innerText = 'LOGGED IN AS: ' + userId;
    var sb = new window.onshiftChatWidget.default();
    var loginData = {
      appId:'C8FEBEEA-89EB-40F7-8710-DBA751C13694',
      nickname: userId,
      role: 'test',
      userId: userId,
      token: 'dummy-token'
    };
    sb.startWithConnect(loginData);
  </script>

</html>
