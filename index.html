<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='UTF-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget Sample</title>

    <style>
      body { margin: 0; background: #E9EBEE; }
    </style>

  </head>
  <body>
    <h2 id="currentUser"></h2>
    <div id="sb_widget"></div>
  </body>
  <script src="build/widget.SendBird.js"></script>
  <script>
    var userId;
    if(document.cookie) {
      userId = document.cookie.split(';')[0].split('=')[1]
    } else {
      var limit = 100;
      var possibleNames = [];
      for(var i = 0; i <= limit; i++) {
        possibleNames.push('a_widget_user_' + i);
      }
      userId = possibleNames[Math.floor(Math.random() * Math.floor(limit))];
      document.cookie = `sendbirdUserId=${name}`;
    }
    document.getElementById("currentUser").innerText = 'LOGGED IN AS: ' + userId;
    var sb = new window.onshiftChatWidget.default();
    var loginData = {
      appId:'9DA1B1F4-0BE6-4DA8-82C5-2E81DAB56F23',
      nickname: userId,
      role: 'test',
      userId: userId,
      token: 'dummy-token'
    };
    sb.startWithConnect(loginData);
  </script>

</html>
